var BookingForm=(()=>{var se=Object.defineProperty,he=Object.defineProperties,me=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,lt=(t,e,a)=>e in t?se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,W=(t,e)=>{for(var a in e||(e={}))be.call(e,a)&&lt(t,a,e[a]);if(At)for(var a of At(e))ue.call(e,a)&&lt(t,a,e[a]);return t},ge=(t,e)=>he(t,me(e)),h=(t,e,a)=>(lt(t,typeof e!="symbol"?e+"":e,a),a),Y={notFoundSelector:t=>`${t} is not found, check the first argument passed to new Calendar.`,notInit:'The calendar has not been initialized, please initialize it using the "init()" method first.',notLocale:"You specified an incorrect language label or did not specify the required number of values \u200B\u200Bfor \xABlocale.weekdays\xBB or \xABlocale.months\xBB.",incorrectTime:"The value of the time property can be: false, 12 or 24.",incorrectMonthsCount:"For the \xABmultiple\xBB calendar type, the \xABdisplayMonthsCount\xBB parameter can have a value from 2 to 12, and for all others it cannot be greater than 1."},b=(t,e,a)=>{t.context[e]=a},pe=t=>{var e,a,o,d,c;if(!t.context.isInit)throw new Error(Y.notInit);t.inputMode?((e=t.context.mainElement.parentElement)==null||e.removeChild(t.context.mainElement),(o=(a=t.context.inputElement)==null?void 0:a.replaceWith)==null||o.call(a,t.context.originalElement),b(t,"inputElement",void 0)):(c=(d=t.context.mainElement).replaceWith)==null||c.call(d,t.context.originalElement),b(t,"mainElement",t.context.originalElement),t.onDestroy&&t.onDestroy(t)},pt=new WeakSet,ye=t=>pt.has(t),we=t=>{pt.add(t)},fe=t=>{pt.delete(t)},P="data-vc-prev-tabindex",Lt=t=>t.tabIndex>=0&&!t.hasAttribute("disabled")&&t.getAttribute("aria-disabled")!=="true",Nt=t=>{if(t.hasAttribute(P))return;let e=t.getAttribute("tabindex");t.setAttribute(P,e!=null?e:"")},It=t=>{if(!t.hasAttribute(P))return;let e=t.getAttribute(P);e===""||e===null?t.removeAttribute("tabindex"):t.setAttribute("tabindex",e),t.removeAttribute(P)},_e=t=>{Lt(t)&&(Nt(t),t.tabIndex=-1);let e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>Lt(a)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;e.nextNode();){let a=e.currentNode;Nt(a),a.tabIndex=-1}},xe=t=>{It(t),t.querySelectorAll(`[${P}]`).forEach(It)},vt=t=>{t.context.isShowInInputMode&&t.context.currentType&&(t.context.mainElement.dataset.vcCalendarHidden="",b(t,"isShowInInputMode",!1),t.inputMode&&_e(t.context.mainElement),t.context.cleanupHandlers[0]&&(t.context.cleanupHandlers.forEach(e=>e()),b(t,"cleanupHandlers",[])),t.inputMode&&t.context.inputElement&&t.context.mainElement.contains(document.activeElement)&&((typeof t.openOnFocus=="function"||t.openOnFocus===!0)&&we(t),t.context.inputElement.focus()),t.onHide&&t.onHide(t))};function yt(t){if(!t||!t.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};let e=t.getBoundingClientRect(),a=document.documentElement;return{bottom:e.bottom,right:e.right,top:e.top+window.scrollY-a.clientTop,left:e.left+window.scrollX-a.clientLeft}}function wt(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function ke(){return{left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0}}function Me(t){let{top:e,left:a}=ke(),{top:o,left:d}=yt(t),{vh:c,vw:r}=wt(),n=o-e,i=d-a;return{top:n,bottom:c-(n+t.clientHeight),left:i,right:r-(i+t.clientWidth)}}function Rt(t,e,a=5){let o={top:!0,bottom:!0,left:!0,right:!0},d=[];if(!e||!t)return{canShow:o,parentPositions:d};let{bottom:c,top:r}=Me(t),{top:n,left:i}=yt(t),{height:v,width:s}=e.getBoundingClientRect(),{vh:u,vw:w}=wt(),f=w/2,M=u/2;return[{condition:n<M,position:"top"},{condition:n>M,position:"bottom"},{condition:i<f,position:"left"},{condition:i>f,position:"right"}].forEach(({condition:D,position:T})=>{D&&d.push(T)}),Object.assign(o,{top:v<=r-a,bottom:v<=c-a,left:s<=i,right:s<=w-i}),{canShow:o,parentPositions:d}}var De=(t,e,a,o)=>{var d;let c=o.querySelector(`[data-vc-date="${e}"]`),r=c==null?void 0:c.querySelector("[data-vc-date-btn]");if(!c||!r||(a!=null&&a.modifier&&r.classList.add(...a.modifier.trim().split(" ")),!(a!=null&&a.html)))return;let n=document.createElement("div");n.className=t.styles.datePopup,n.dataset.vcDatePopup="",n.innerHTML=t.sanitizerHTML(a.html),r.ariaExpanded="true",r.ariaLabel=`${r.ariaLabel}, ${(d=n==null?void 0:n.textContent)==null?void 0:d.replace(/^\s+|\s+(?=\s)|\s+$/g,"").replace(/&nbsp;/g," ")}`,c.appendChild(n),requestAnimationFrame(()=>{if(!n)return;let{canShow:i}=Rt(c,n),v=i.bottom?c.offsetHeight:-n.offsetHeight,s=i.left&&!i.right?c.offsetWidth-n.offsetWidth/2:!i.left&&i.right?n.offsetWidth/2:0;Object.assign(n.style,{left:`${s}px`,top:`${v}px`})})},Ee=(t,e)=>{var a;t.popups&&((a=Object.entries(t.popups))==null||a.forEach(([o,d])=>De(t,o,d,e)))},y=t=>new Date(`${t}T00:00:00`),H=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,L=t=>t.reduce((e,a)=>{if(a instanceof Date||typeof a=="number"){let o=a instanceof Date?a:new Date(a);e.push(o.toISOString().substring(0,10))}else a.match(/^(\d{4}-\d{2}-\d{2})$/g)?e.push(a):a.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,(o,d,c)=>{let r=y(d),n=y(c),i=new Date(r.getTime());for(;i<=n;i.setDate(i.getDate()+1))e.push(H(i));return o});return e},[]),I=(t,e,a,o="")=>{e?t.setAttribute(a,o):t.getAttribute(a)===o&&t.removeAttribute(a)},Bt=(t,e,a,o,d,c,r)=>{var n,i,v,s;let u=y(t.context.displayDateMin)>y(c)||y(t.context.displayDateMax)<y(c)||((n=t.context.disableDates)==null?void 0:n.includes(c))||!t.selectionMonthsMode&&r!=="current"||!t.selectionYearsMode&&y(c).getFullYear()!==e;I(a,u,"data-vc-date-disabled"),o&&I(o,u,"aria-disabled","true"),o&&I(o,u,"tabindex","-1"),I(a,!t.disableToday&&t.context.dateToday===c,"data-vc-date-today"),I(a,!t.disableToday&&t.context.dateToday===c,"aria-current","date"),I(a,(i=t.selectedWeekends)==null?void 0:i.includes(d),"data-vc-date-weekend");let w=(v=t.selectedHolidays)!=null&&v[0]?L(t.selectedHolidays):[];if(I(a,w.includes(c),"data-vc-date-holiday"),(s=t.context.selectedDates)!=null&&s.includes(c)?(a.setAttribute("data-vc-date-selected",""),o&&o.setAttribute("aria-selected","true"),t.context.selectedDates.length>1&&t.selectionDatesMode==="multiple-ranged"&&(t.context.selectedDates[0]===c&&t.context.selectedDates[t.context.selectedDates.length-1]===c?a.setAttribute("data-vc-date-selected","first-and-last"):t.context.selectedDates[0]===c?a.setAttribute("data-vc-date-selected","first"):t.context.selectedDates[t.context.selectedDates.length-1]===c&&a.setAttribute("data-vc-date-selected","last"),t.context.selectedDates[0]!==c&&t.context.selectedDates[t.context.selectedDates.length-1]!==c&&a.setAttribute("data-vc-date-selected","middle"))):a.hasAttribute("data-vc-date-selected")&&(a.removeAttribute("data-vc-date-selected"),o&&o.removeAttribute("aria-selected")),!t.context.disableDates.includes(c)&&t.enableEdgeDatesOnly&&t.context.selectedDates.length>1&&t.selectionDatesMode==="multiple-ranged"){let f=y(t.context.selectedDates[0]),M=y(t.context.selectedDates[t.context.selectedDates.length-1]),D=y(c);I(a,D>f&&D<M,"data-vc-date-selected","middle")}},Te=(t,e,a)=>new Date(`${t}T00:00:00.000Z`).toLocaleString(e,a),Zt=(t,e)=>{let a=y(t),o=(a.getDay()-e+7)%7;a.setDate(a.getDate()+4-o);let d=new Date(a.getFullYear(),0,1),c=Math.ceil(((+a-+d)/864e5+1)/7);return{year:a.getFullYear(),week:c}},Se=(t,e,a)=>{let o=Zt(a,t.firstWeekday);o&&(e.dataset.vcDateWeekNumber=String(o.week))},Ce=(t,e,a)=>{var o,d,c,r,n;let i=(o=t.disableWeekdays)==null?void 0:o.includes(a),v=t.disableAllDates&&!!((d=t.context.enableDates)!=null&&d[0]);!i&&!v||(c=t.context.enableDates)!=null&&c.includes(e)||(r=t.context.disableDates)!=null&&r.includes(e)||(t.context.disableDates.push(e),(n=t.context.disableDates)==null||n.sort((s,u)=>+new Date(s)-+new Date(u)))},ft=(t,e,a,o,d,c)=>{let r=y(d).getDay(),n=typeof t.locale=="string"&&t.locale.length?t.locale:"en",i=document.createElement("div"),v;i.className=t.styles.date,i.dataset.vcDate=d,i.dataset.vcDateMonth=c,i.dataset.vcDateWeekDay=String(r),i.role="gridcell",(c==="current"||t.displayDatesOutside)&&(v=document.createElement("button"),v.className=t.styles.dateBtn,v.type="button",v.ariaLabel=Te(d,n,{dateStyle:"long",timeZone:"UTC"}),v.dataset.vcDateBtn="",v.innerText=String(o),i.appendChild(v)),t.enableWeekNumbers&&Se(t,i,d),Ce(t,d,r),Bt(t,e,i,v,r,d,c),a.addDate(i),t.onCreateDateEls&&t.onCreateDateEls(t,i)},Ae=(t,e,a,o,d)=>{for(let c=1;c<=a;c++){let r=new Date(o,d,c);ft(t,o,e,c,H(r),"current")}},Le=(t,e,a,o,d)=>{let c=d+1===12?o+1:o,r=d+1===12?"01":d+2<10?`0${d+2}`:d+2;for(let n=1;n<=a;n++){let i=n<10?`0${n}`:String(n);ft(t,o,e,n,`${c}-${r}-${i}`,"next")}},Ne=(t,e,a,o,d)=>{let c=new Date(a,o,0).getDate()-(d-1),r=o===0?a-1:a,n=o===0?12:o<10?`0${o}`:o;for(let i=d;i>0;i--,c++)ft(t,a,e,c,`${r}-${n}-${c}`,"prev")},Ie=(t,e,a,o,d)=>{if(!t.enableWeekNumbers)return;o.textContent="";let c=document.createElement("b");c.className=t.styles.weekNumbersTitle,c.innerText="#",c.dataset.vcWeekNumbers="title",o.appendChild(c);let r=document.createElement("div");r.className=t.styles.weekNumbersContent,r.dataset.vcWeekNumbers="content",o.appendChild(r);let n=document.createElement("button");n.type="button",n.className=t.styles.weekNumber;let i=d.querySelectorAll("[data-vc-date]"),v=Math.ceil((e+a)/7);for(let s=0;s<v;s++){let u=i[s===0?6:7*s].dataset.vcDate,w=Zt(u,t.firstWeekday);if(!w)return;let f=n.cloneNode(!0);f.innerText=String(w.week),f.dataset.vcWeekNumber=String(w.week),f.dataset.vcWeekYear=String(w.year),f.role="rowheader",f.ariaLabel=`${w.week}`,r.appendChild(f)}},st=t=>{let e=new Date(t.context.selectedYear,t.context.selectedMonth,1),a=t.context.mainElement.querySelectorAll('[data-vc="dates"]'),o=t.context.mainElement.querySelectorAll('[data-vc-week="numbers"]');a.forEach((d,c)=>{t.selectionDatesMode||(d.dataset.vcDatesDisabled=""),d.textContent="";let r=new Date(e);r.setMonth(r.getMonth()+c);let n=r.getMonth(),i=r.getFullYear(),v=(new Date(i,n,1).getDay()-t.firstWeekday+7)%7,s=new Date(i,n+1,0).getDate(),u=v+s,w=Math.ceil(u/7),f=7*w-u,M=[];for(let N=0;N<w;N++){let F=document.createElement("div");F.className=t.styles.datesRow,F.setAttribute("data-vc-dates","row"),F.setAttribute("role","row"),M.push(F)}let D=0,T=0,q={addDate:N=>{M[D].appendChild(N),T++,T>=7&&(D++,T=0)}};Ne(t,q,i,n,v),Ae(t,q,s,i,n),Le(t,q,f,i,n);for(let N of M)d.appendChild(N);Ee(t,d),Ie(t,v,s,o[c],d)})},Ye=t=>`
  <div class="${t.styles.header}" data-vc="header" role="toolbar" aria-label="${t.labels.navigation}">
    <#ArrowPrev [month] />
    <div class="${t.styles.headerContent}" data-vc-header="content">
      <#Month />
      <#Year />
    </div>
    <#ArrowNext [month] />
  </div>
  <div class="${t.styles.wrapper}" data-vc="wrapper">
    <#WeekNumbers />
    <div class="${t.styles.content}" data-vc="content" role="grid">
      <#Week />
      <#Dates />
      <#DateRangeTooltip />
    </div>
  </div>
  <#ControlTime />
`,$e=t=>`
  <div class="${t.styles.header}" data-vc="header" role="toolbar" aria-label="${t.labels.navigation}">
    <div class="${t.styles.headerContent}" data-vc-header="content">
      <#Month />
      <#Year />
    </div>
  </div>
  <div class="${t.styles.wrapper}" data-vc="wrapper">
    <div class="${t.styles.content}" data-vc="content">
      <#Months />
    </div>
  </div>
`,ze=t=>`
  <div class="${t.styles.controls}" data-vc="controls" role="toolbar" aria-label="${t.labels.navigation}">
    <#ArrowPrev [month] />
    <#ArrowNext [month] />
  </div>
  <div class="${t.styles.grid}" data-vc="grid">
    <#Multiple>
      <div class="${t.styles.column}" data-vc="column" role="region">
        <div class="${t.styles.header}" data-vc="header">
          <div class="${t.styles.headerContent}" data-vc-header="content">
            <#Month />
            <#Year />
          </div>
        </div>
        <div class="${t.styles.wrapper}" data-vc="wrapper">
          <#WeekNumbers />
          <div class="${t.styles.content}" data-vc="content" role="grid">
            <#Week />
            <#Dates />
          </div>
        </div>
      </div>
    <#/Multiple>
    <#DateRangeTooltip />
  </div>
  <#ControlTime />
`,He=t=>`
  <div class="${t.styles.header}" data-vc="header" role="toolbar" aria-label="${t.labels.navigation}">
    <#ArrowPrev [year] />
    <div class="${t.styles.headerContent}" data-vc-header="content">
      <#Month />
      <#Year />
    </div>
    <#ArrowNext [year] />
  </div>
  <div class="${t.styles.wrapper}" data-vc="wrapper">
    <div class="${t.styles.content}" data-vc="content">
      <#Years />
    </div>
  </div>
`,Fe=(t,e)=>`<button type="button" class="${t.styles.arrowNext}" data-vc-arrow="next" aria-label="${t.labels.arrowNext[e]}"></button>`,je=(t,e)=>`<button type="button" class="${t.styles.arrowPrev}" data-vc-arrow="prev" aria-label="${t.labels.arrowPrev[e]}"></button>`,Pe=t=>t.selectionTimeMode?`<div class="${t.styles.time}" data-vc="time" role="group" aria-label="${t.labels.selectingTime}"></div>`:"",We=t=>t.onCreateDateRangeTooltip?`<div class="${t.styles.dateRangeTooltip}" data-vc-date-range-tooltip="hidden"></div>`:"",Oe=t=>`<div class="${t.styles.dates}" data-vc="dates" aria-live="assertive" aria-label="${t.labels.dates}" ${t.type==="multiple"?"aria-multiselectable":""}></div>`,qe=t=>`<button type="button" class="${t.styles.month}" data-vc="month"></button>`,Re=t=>`<div class="${t.styles.months}" data-vc="months" role="grid" aria-live="assertive" aria-label="${t.labels.months}"></div>`,Be=t=>`<div class="${t.styles.week}" data-vc="week" role="row" aria-label="${t.labels.week}"></div>`,Ze=t=>t.enableWeekNumbers?`<div class="${t.styles.weekNumbers}" data-vc-week="numbers" role="row" aria-label="${t.labels.weekNumber}"></div>`:"",Ke=t=>`<button type="button" class="${t.styles.year}" data-vc="year"></button>`,Ue=t=>`<div class="${t.styles.years}" data-vc="years" role="grid" aria-live="assertive" aria-label="${t.labels.years}"></div>`,Ge={ArrowNext:Fe,ArrowPrev:je,ControlTime:Pe,Dates:Oe,DateRangeTooltip:We,Month:qe,Months:Re,Week:Be,WeekNumbers:Ze,Year:Ke,Years:Ue},Qe=t=>Ge[t],rt=(t,e)=>e.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,(a,o)=>{let d=(o.match(/\[(.*?)\]/)||[])[1],c=o.replace(/[/\s\n\t]|\[(.*?)\]/g,""),r=Qe(c),n=r?r(t,d!=null?d:null):"";return t.sanitizerHTML(n)}).replace(/[\n\t]/g,""),Ve=(t,e)=>e.replace(new RegExp("<#Multiple>(.*?)<#\\/Multiple>","gs"),(a,o)=>{let d=Array(t.context.displayMonthsCount).fill(o).join("");return t.sanitizerHTML(d)}).replace(/[\n\t]/g,""),_t=(t,e)=>{let a={default:Ye,month:$e,year:He,multiple:ze};if(Object.keys(a).forEach(o=>{let d=o;t.layouts[d].length||(t.layouts[d]=a[d](t))}),t.context.mainElement.className=t.styles.calendar,t.context.mainElement.dataset.vc="calendar",t.context.mainElement.dataset.vcType=t.context.currentType,t.context.mainElement.role="application",t.context.mainElement.tabIndex=0,t.context.mainElement.ariaLabel=t.labels.application,t.context.currentType!=="multiple"){if(t.type==="multiple"&&e){let o=t.context.mainElement.querySelector('[data-vc="controls"]'),d=t.context.mainElement.querySelector('[data-vc="grid"]'),c=e.closest('[data-vc="column"]');return o&&o.remove(),d&&(d.dataset.vcGrid="hidden"),c&&(c.dataset.vcColumn=t.context.currentType),void(c&&(c.innerHTML=t.sanitizerHTML(rt(t,t.layouts[t.context.currentType]))))}t.context.mainElement.innerHTML=t.sanitizerHTML(rt(t,t.layouts[t.context.currentType]))}else t.context.mainElement.innerHTML=t.sanitizerHTML(Ve(t,rt(t,t.layouts[t.context.currentType])))},Kt=(t,e,a,o)=>{t.style.visibility=a?"hidden":"",e.style.visibility=o?"hidden":""},Xe=(t,e,a)=>{let o=y(H(new Date(t.context.selectedYear,t.context.selectedMonth,1))),d=new Date(o.getTime()),c=new Date(o.getTime());d.setMonth(d.getMonth()-t.monthsToSwitch),c.setMonth(c.getMonth()+t.monthsToSwitch);let r=y(t.context.dateMin),n=y(t.context.dateMax);t.selectionYearsMode||(r.setFullYear(o.getFullYear()),n.setFullYear(o.getFullYear()));let i=!t.selectionMonthsMode||d.getFullYear()<r.getFullYear()||d.getFullYear()===r.getFullYear()&&d.getMonth()<r.getMonth(),v=!t.selectionMonthsMode||c.getFullYear()>n.getFullYear()||c.getFullYear()===n.getFullYear()&&c.getMonth()>n.getMonth()-(t.context.displayMonthsCount-1);Kt(e,a,i,v)},Je=(t,e,a)=>{let o=y(t.context.dateMin),d=y(t.context.dateMax),c=!!(o.getFullYear()&&t.context.displayYear-7<=o.getFullYear()),r=!!(d.getFullYear()&&t.context.displayYear+7>=d.getFullYear());Kt(e,a,c,r)},dt=t=>{if(t.context.currentType==="month")return;let e=t.context.mainElement.querySelector('[data-vc-arrow="prev"]'),a=t.context.mainElement.querySelector('[data-vc-arrow="next"]');!e||!a||{default:()=>Xe(t,e,a),year:()=>Je(t,e,a)}[t.context.currentType==="multiple"?"default":t.context.currentType]()},ta=(t,e,a,o,d)=>{let c=new Date(o.setFullYear(t.context.selectedYear,t.context.selectedMonth+a)).getFullYear(),r=new Date(o.setMonth(t.context.selectedMonth+a)).getMonth(),n=t.context.locale.months.long[r],i=e.closest('[data-vc="column"]');i&&(i.ariaLabel=`${n} ${c}`);let v={month:{id:r,label:n},year:{id:c,label:c}};e.innerText=String(v[d].label),e.dataset[`vc${d.charAt(0).toUpperCase()+d.slice(1)}`]=String(v[d].id),e.ariaLabel=`${t.labels[d]} ${v[d].label}`;let s={month:t.selectionMonthsMode,year:t.selectionYearsMode},u=s[d]===!1||s[d]==="only-arrows";u&&(e.tabIndex=-1),e.disabled=u},G=t=>{let e=t.context.mainElement.querySelectorAll('[data-vc="month"]'),a=t.context.mainElement.querySelectorAll('[data-vc="year"]'),o=new Date(t.context.selectedYear,t.context.selectedMonth,1);[e,a].forEach(d=>d==null?void 0:d.forEach((c,r)=>ta(t,c,r,o,c.dataset.vc)))},xt=(t,e,a,o,d)=>{var c;let r={month:"[data-vc-months-month]",year:"[data-vc-years-year]"},n={month:{selected:"data-vc-months-month-selected",aria:"aria-selected",value:"vcMonthsMonth",selectedProperty:"selectedMonth"},year:{selected:"data-vc-years-year-selected",aria:"aria-selected",value:"vcYearsYear",selectedProperty:"selectedYear"}};d&&((c=t.context.mainElement.querySelectorAll(r[a]))==null||c.forEach(i=>{i.removeAttribute(n[a].selected),i.removeAttribute(n[a].aria)}),b(t,n[a].selectedProperty,Number(e.dataset[n[a].value])),G(t),a==="year"&&dt(t)),o&&(e.setAttribute(n[a].selected,""),e.setAttribute(n[a].aria,"true"))},kt=(t,e)=>{var a;if(t.type!=="multiple")return{currentValue:null,columnID:0};let o=t.context.mainElement.querySelectorAll('[data-vc="column"]'),d=Array.from(o).findIndex(c=>c.closest(`[data-vc-column="${e}"]`));return{currentValue:d>=0?Number((a=o[d].querySelector(`[data-vc="${e}"]`))==null?void 0:a.getAttribute(`data-vc-${e}`)):null,columnID:Math.max(d,0)}},ea=(t,e,a,o,d,c,r)=>{let n=e.cloneNode(!1);return n.className=t.styles.monthsMonth,n.innerText=o,n.ariaLabel=d,n.role="gridcell",n.dataset.vcMonthsMonth=`${r}`,c&&(n.ariaDisabled="true"),c&&(n.tabIndex=-1),n.disabled=c,xt(t,n,"month",a===r,!1),n},Ut=(t,e)=>{var a,o;let d=(a=e==null?void 0:e.closest('[data-vc="header"]'))==null?void 0:a.querySelector('[data-vc="year"]'),c=d?Number(d.dataset.vcYear):t.context.selectedYear,r=e!=null&&e.dataset.vcMonth?Number(e.dataset.vcMonth):t.context.selectedMonth;b(t,"currentType","month"),_t(t,e),G(t);let n=t.context.mainElement.querySelector('[data-vc="months"]');if(!t.selectionMonthsMode||!n)return;let i=t.monthsToSwitch>1?t.context.locale.months.long.map((s,u)=>r-t.monthsToSwitch*u).concat(t.context.locale.months.long.map((s,u)=>r+t.monthsToSwitch*u)).filter(s=>s>=0&&s<=12):Array.from(Array(12).keys()),v=document.createElement("button");v.type="button";for(let s=0;s<12;s++){let u=y(t.context.dateMin),w=y(t.context.dateMax),f=t.context.displayMonthsCount-1,{columnID:M}=kt(t,"month"),D=c<=u.getFullYear()&&s<u.getMonth()+M||c>=w.getFullYear()&&s>w.getMonth()-f+M||c>w.getFullYear()||s!==r&&!i.includes(s),T=ea(t,v,r,t.context.locale.months.short[s],t.context.locale.months.long[s],D,s);n.appendChild(T),t.onCreateMonthEls&&t.onCreateMonthEls(t,T)}(o=t.context.mainElement.querySelector("[data-vc-months-month]:not([disabled])"))==null||o.focus()},Yt=(t,e,a,o,d)=>`
  <label class="${e}" data-vc-time-input="${t}">
    <input type="text" name="${t}" maxlength="2" aria-label="${a[`input${t.charAt(0).toUpperCase()+t.slice(1)}`]}" value="${o}" ${d?"disabled":""}>
  </label>
`,$t=(t,e,a,o,d,c,r)=>`
  <label class="${e}" data-vc-time-range="${t}">
    <input type="range" name="${t}" min="${o}" max="${d}" step="${c}" aria-label="${a[`range${t.charAt(0).toUpperCase()+t.slice(1)}`]}" value="${r}">
  </label>
`,Z=(t,e,a,o)=>{({hour:()=>b(t,"selectedHours",a),minute:()=>b(t,"selectedMinutes",a)})[o](),b(t,"selectedTime",`${t.context.selectedHours}:${t.context.selectedMinutes}${t.context.selectedKeeping?` ${t.context.selectedKeeping}`:""}`),t.onChangeTime&&t.onChangeTime(t,e,!1),t.inputMode&&t.context.inputElement&&t.context.mainElement&&t.onChangeToInput&&t.onChangeToInput(t,e)},tt=(t,e)=>{var a;return((a={0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"00",PM:"12"}}[Number(t)])==null?void 0:a[e])||String(t)},aa=(t,e,a,o,d)=>{let c=r=>{let n=t.context.selectedKeeping==="AM"?"PM":"AM",i=tt(t.context.selectedHours,n);Number(i)<=o&&Number(i)>=d?(b(t,"selectedKeeping",n),a.value=i,Z(t,r,t.context.selectedHours,"hour"),e.ariaLabel=`${t.labels.btnKeeping} ${t.context.selectedKeeping}`,e.innerText=t.context.selectedKeeping):t.onChangeTime&&t.onChangeTime(t,r,!0)};return e.addEventListener("click",c),()=>{e.removeEventListener("click",c)}},K=t=>({0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"})[Number(t)]||String(t),V=(t,e,a,o)=>{t.value=a,e.value=o},da=(t,e,a)=>{e&&a&&(b(t,"selectedKeeping",a),e.innerText=a)},zt=(t,e,a,o,d,c,r)=>{let n={hour:(v,s,u)=>{t.selectionTimeMode&&{12:()=>{if(!t.context.selectedKeeping)return;let w=Number(tt(s,t.context.selectedKeeping));if(!(w<=c&&w>=r))return V(a,e,t.context.selectedHours,t.context.selectedHours),void(t.onChangeTime&&t.onChangeTime(t,u,!0));V(a,e,K(s),tt(s,t.context.selectedKeeping)),v>12&&da(t,o,"PM"),Z(t,u,K(s),d)},24:()=>{if(!(v<=c&&v>=r))return V(a,e,t.context.selectedHours,t.context.selectedHours),void(t.onChangeTime&&t.onChangeTime(t,u,!0));V(a,e,s,s),Z(t,u,s,d)}}[t.selectionTimeMode]()},minute:(v,s,u)=>{if(!(v<=c&&v>=r))return a.value=t.context.selectedMinutes,void(t.onChangeTime&&t.onChangeTime(t,u,!0));a.value=s,e.value=s,Z(t,u,s,d)}},i=v=>{let s=Number(a.value),u=a.value.padStart(2,"0");n[d]&&n[d](s,u,v)};return a.addEventListener("change",i),()=>{a.removeEventListener("change",i)}},oa=(t,e,a,o,d)=>{e.value=d,Z(t,a,d,o)},ca=(t,e,a)=>{e&&(b(t,"selectedKeeping",a),e.innerText=a)},Ht=(t,e,a,o,d)=>{let c=r=>{let n=Number(e.value),i=e.value.padStart(2,"0"),v=d==="hour",s=t.selectionTimeMode===24,u=n>0&&n<12;v&&!s&&ca(t,o,n===0||u?"AM":"PM"),oa(t,a,r,d,!v||s||u?i:K(e.value))};return e.addEventListener("input",c),()=>{e.removeEventListener("input",c)}},Ft=t=>t.setAttribute("data-vc-input-focus",""),jt=t=>t.removeAttribute("data-vc-input-focus"),na=(t,e)=>{let a=e.querySelector('[data-vc-time-range="hour"] input[name="hour"]'),o=e.querySelector('[data-vc-time-range="minute"] input[name="minute"]'),d=e.querySelector('[data-vc-time-input="hour"] input[name="hour"]'),c=e.querySelector('[data-vc-time-input="minute"] input[name="minute"]'),r=e.querySelector('[data-vc-time="keeping"]');if(!(a&&o&&d&&c))return;let n=v=>{v.target===a&&Ft(d),v.target===o&&Ft(c)},i=v=>{v.target===a&&jt(d),v.target===o&&jt(c)};return e.addEventListener("mouseover",n),e.addEventListener("mouseout",i),zt(t,a,d,r,"hour",t.timeMaxHour,t.timeMinHour),zt(t,o,c,r,"minute",t.timeMaxMinute,t.timeMinMinute),Ht(t,a,d,r,"hour"),Ht(t,o,c,r,"minute"),r&&aa(t,r,a,t.timeMaxHour,t.timeMinHour),()=>{e.removeEventListener("mouseover",n),e.removeEventListener("mouseout",i)}},ra=t=>{let e=t.context.mainElement.querySelector('[data-vc="time"]');if(!t.selectionTimeMode||!e)return;let[a,o]=[t.timeMinHour,t.timeMaxHour],[d,c]=[t.timeMinMinute,t.timeMaxMinute],r=t.context.selectedKeeping?tt(t.context.selectedHours,t.context.selectedKeeping):t.context.selectedHours,n=t.timeControls==="range";var i;e.innerHTML=t.sanitizerHTML(`
    <div class="${t.styles.timeContent}" data-vc-time="content">
      ${Yt("hour",t.styles.timeHour,t.labels,t.context.selectedHours,n)}
      ${Yt("minute",t.styles.timeMinute,t.labels,t.context.selectedMinutes,n)}
      ${t.selectionTimeMode===12?(i=t.context.selectedKeeping,`<button type="button" class="${t.styles.timeKeeping}" aria-label="${t.labels.btnKeeping} ${i}" data-vc-time="keeping" ${n?"disabled":""}>${i}</button>`):""}
    </div>
    <div class="${t.styles.timeRanges}" data-vc-time="ranges">
      ${$t("hour",t.styles.timeRange,t.labels,a,o,t.timeStepHour,r)}
      ${$t("minute",t.styles.timeRange,t.labels,d,c,t.timeStepMinute,t.context.selectedMinutes)}
    </div>
  `),na(t,e)},Pt=t=>{let e=t.selectedWeekends?[...t.selectedWeekends]:[],a=[...t.context.locale.weekdays.long].reduce((d,c,r)=>[...d,{id:r,titleShort:t.context.locale.weekdays.short[r],titleLong:c,isWeekend:e.includes(r)}],[]),o=[...a.slice(t.firstWeekday),...a.slice(0,t.firstWeekday)];t.context.mainElement.querySelectorAll('[data-vc="week"]').forEach(d=>{let c=t.onClickWeekDay?document.createElement("button"):document.createElement("b");t.onClickWeekDay&&(c.type="button"),o.forEach(r=>{let n=c.cloneNode(!0);n.innerText=r.titleShort,n.className=t.styles.weekDay,n.role="columnheader",n.ariaLabel=r.titleLong,n.dataset.vcWeekDay=String(r.id),r.isWeekend&&(n.dataset.vcWeekDayOff=""),d.appendChild(n)})})},ia=(t,e,a,o,d)=>{let c=e.cloneNode(!1);return c.className=t.styles.yearsYear,c.innerText=String(d),c.ariaLabel=String(d),c.role="gridcell",c.dataset.vcYearsYear=`${d}`,o&&(c.ariaDisabled="true"),o&&(c.tabIndex=-1),c.disabled=o,xt(t,c,"year",a===d,!1),c},Mt=(t,e)=>{var a;let o=e!=null&&e.dataset.vcYear?Number(e.dataset.vcYear):t.context.selectedYear;b(t,"currentType","year"),_t(t,e),G(t),dt(t);let d=t.context.mainElement.querySelector('[data-vc="years"]');if(!t.selectionYearsMode||!d)return;let c=t.type!=="multiple"||t.context.selectedYear===o?0:1,r=document.createElement("button");r.type="button";for(let n=t.context.displayYear-7;n<t.context.displayYear+8;n++){let i=n<y(t.context.dateMin).getFullYear()+c||n>y(t.context.dateMax).getFullYear(),v=ia(t,r,o,i,n);d.appendChild(v),t.onCreateYearEls&&t.onCreateYearEls(t,v)}(a=t.context.mainElement.querySelector("[data-vc-years-year]:not([disabled])"))==null||a.focus()},la=(t,e,a)=>{new MutationObserver(o=>{for(let d=0;d<o.length;d++)if(o[d].attributeName===e){a();break}}).observe(t,{attributes:!0})},et={value:!1,set:()=>et.value=!0,check:()=>et.value},O=(t,e)=>t.dataset.vcTheme=e,Wt=(t,e)=>{if(O(t.context.mainElement,e.matches?"dark":"light"),t.selectedTheme!=="system"||et.check())return;let a=o=>{let d=document.querySelectorAll('[data-vc="calendar"]');d==null||d.forEach(c=>O(c,o.matches?"dark":"light"))};e.addEventListener?e.addEventListener("change",a):e.addListener(a),et.set()},va=(t,e)=>{let a=t.themeAttrDetect.length?document.querySelector(t.themeAttrDetect):null,o=t.themeAttrDetect.replace(/^.*\[(.+)\]/g,(c,r)=>r);if(!a||a.getAttribute(o)==="system")return void Wt(t,e);let d=a.getAttribute(o);d?(O(t.context.mainElement,d),la(a,o,()=>{let c=a.getAttribute(o);c&&O(t.context.mainElement,c)})):Wt(t,e)},sa=t=>{window.matchMedia("(prefers-color-scheme)").media!=="not all"?t.selectedTheme==="system"?va(t,window.matchMedia("(prefers-color-scheme: dark)")):O(t.context.mainElement,t.selectedTheme):O(t.context.mainElement,"light")},at=t=>t.charAt(0).toUpperCase()+t.slice(1).replace(/\./,""),ha=(t,e,a)=>{let o=new Date(`1978-01-0${e+1}T00:00:00.000Z`),d=o.toLocaleString(a,{weekday:"short",timeZone:"UTC"}),c=o.toLocaleString(a,{weekday:"long",timeZone:"UTC"});t.context.locale.weekdays.short.push(at(d)),t.context.locale.weekdays.long.push(at(c))},ma=(t,e,a)=>{let o=new Date(`1978-${String(e+1).padStart(2,"0")}-01T00:00:00.000Z`),d=o.toLocaleString(a,{month:"short",timeZone:"UTC"}),c=o.toLocaleString(a,{month:"long",timeZone:"UTC"});t.context.locale.months.short.push(at(d)),t.context.locale.months.long.push(at(c))},ba=t=>{var e,a,o,d,c,r,n,i;if(!(t.context.locale.weekdays.short[6]&&t.context.locale.weekdays.long[6]&&t.context.locale.months.short[11]&&t.context.locale.months.long[11]))if(typeof t.locale=="string"){if(typeof t.locale=="string"&&!t.locale.length)throw new Error(Y.notLocale);Array.from({length:7},(v,s)=>ha(t,s,t.locale)),Array.from({length:12},(v,s)=>ma(t,s,t.locale))}else{if(!((a=(e=t.locale)==null?void 0:e.weekdays)!=null&&a.short[6]&&((d=(o=t.locale)==null?void 0:o.weekdays)!=null&&d.long[6])&&((r=(c=t.locale)==null?void 0:c.months)!=null&&r.short[11])&&((i=(n=t.locale)==null?void 0:n.months)!=null&&i.long[11])))throw new Error(Y.notLocale);b(t,"locale",W({},t.locale))}},ot=t=>{let e={default:()=>{Pt(t),st(t)},multiple:()=>{Pt(t),st(t)},month:()=>Ut(t),year:()=>Mt(t)};sa(t),ba(t),_t(t),G(t),dt(t),ra(t),e[t.context.currentType]()},Gt=t=>{let e=a=>{var o;let d=a.target;if(!["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(a.key)||d.localName!=="button")return;let c=Array.from(t.context.mainElement.querySelectorAll('[data-vc="calendar"] button')),r=c.indexOf(d);if(r===-1)return;let n=(i=c[r]).hasAttribute("data-vc-date-btn")?7:i.hasAttribute("data-vc-months-month")?4:i.hasAttribute("data-vc-years-year")?5:1;var i;let v=(0,{ArrowUp:()=>Math.max(0,r-n),ArrowDown:()=>Math.min(c.length-1,r+n),ArrowLeft:()=>Math.max(0,r-1),ArrowRight:()=>Math.min(c.length-1,r+1)}[a.key])();(o=c[v])==null||o.focus()};return t.context.mainElement.addEventListener("keydown",e),()=>t.context.mainElement.removeEventListener("keydown",e)},ht=(t,e)=>{let a=y(H(new Date(t.context.selectedYear,t.context.selectedMonth,1)));({prev:()=>a.setMonth(a.getMonth()-t.monthsToSwitch),next:()=>a.setMonth(a.getMonth()+t.monthsToSwitch)})[e](),b(t,"selectedMonth",a.getMonth()),b(t,"selectedYear",a.getFullYear()),G(t),dt(t),st(t)},ua=(t,e)=>{let a=e.target.closest("[data-vc-arrow]");if(a){if(["default","multiple"].includes(t.context.currentType))ht(t,a.dataset.vcArrow);else if(t.context.currentType==="year"&&t.context.displayYear!==void 0){let o={prev:-15,next:15}[a.dataset.vcArrow];b(t,"displayYear",t.context.displayYear+o),Mt(t,e.target)}t.onClickArrow&&t.onClickArrow(t,e)}},Qt=(t,e)=>e===void 0||(typeof e=="function"?e(t):e),mt=t=>Qt(t,t.enableDateToggle),Ot=(t,e,a)=>{let o=e.dataset.vcDate,d=e.closest("[data-vc-date][data-vc-date-selected]"),c=mt(t);if(d&&!c)return;let r=d?t.context.selectedDates.filter(n=>n!==o):a?[...t.context.selectedDates,o]:[o];b(t,"selectedDates",r)},A=(t,e,a)=>{if(!e)return;if(!a)return e.dataset.vcDateRangeTooltip="hidden",void(e.textContent="");let o=t.context.mainElement.getBoundingClientRect(),d=a.getBoundingClientRect();e.style.left=d.left-o.left+d.width/2+"px",e.style.top=d.bottom-o.top-d.height+"px",e.dataset.vcDateRangeTooltip="visible",e.innerHTML=t.sanitizerHTML(t.onCreateDateRangeTooltip(t,a,e,d,o))},l={self:null,lastDateEl:null,isHovering:!1,rangeMin:void 0,rangeMax:void 0,tooltipEl:null,timeoutId:null},ga=(t,e,a)=>{var o,d,c;if(!((d=(o=l.self)==null?void 0:o.context)!=null&&d.selectedDates[0]))return;let r=H(t);(c=l.self.context.disableDates)!=null&&c.includes(r)||(l.self.context.mainElement.querySelectorAll(`[data-vc-date="${r}"]`).forEach(n=>n.dataset.vcDateHover=""),e.forEach(n=>n.dataset.vcDateHover="first"),a.forEach(n=>{n.dataset.vcDateHover==="first"?n.dataset.vcDateHover="first-and-last":n.dataset.vcDateHover="last"}))},U=()=>{var t,e;(e=(t=l.self)==null?void 0:t.context)!=null&&e.mainElement&&l.self.context.mainElement.querySelectorAll("[data-vc-date-hover]").forEach(a=>a.removeAttribute("data-vc-date-hover"))},pa=t=>{var e,a;if(!t||!((a=(e=l.self)==null?void 0:e.context)!=null&&a.selectedDates[0]))return;if(!t.closest('[data-vc="dates"]'))return l.lastDateEl=null,A(l.self,l.tooltipEl,null),void U();let o=t.closest("[data-vc-date]");if(!o||l.lastDateEl===o)return;l.lastDateEl=o,A(l.self,l.tooltipEl,o),U();let d=o.dataset.vcDate,c=y(l.self.context.selectedDates[0]),r=y(d),n=l.self.context.mainElement.querySelectorAll(`[data-vc-date="${l.self.context.selectedDates[0]}"]`),i=l.self.context.mainElement.querySelectorAll(`[data-vc-date="${d}"]`),[v,s]=c<r?[n,i]:[i,n],[u,w]=c<r?[c,r]:[r,c];for(let f=new Date(u);f<=w;f.setDate(f.getDate()+1))ga(f,v,s)},ya=t=>{let e=t==null?void 0:t.closest("[data-vc-date-selected]");if(!e&&l.lastDateEl)return l.lastDateEl=null,void A(l.self,l.tooltipEl,null);e&&l.lastDateEl!==e&&(l.lastDateEl=e,A(l.self,l.tooltipEl,e))},Vt=t=>e=>{let a=e.target;l.isHovering||(l.isHovering=!0,requestAnimationFrame(()=>{t(a),l.isHovering=!1}))},J=Vt(pa),X=Vt(ya),B=t=>{l.self&&t.key==="Escape"&&(l.lastDateEl=null,b(l.self,"selectedDates",[]),l.self.context.mainElement.removeEventListener("mousemove",J),l.self.context.mainElement.removeEventListener("keydown",B),A(l.self,l.tooltipEl,null),U())},$=()=>{l.timeoutId!==null&&clearTimeout(l.timeoutId),l.timeoutId=setTimeout(()=>{l.lastDateEl=null,A(l.self,l.tooltipEl,null),U()},50)},wa=()=>{var t,e,a,o;if(!((a=(e=(t=l.self)==null?void 0:t.context)==null?void 0:e.selectedDates)!=null&&a[0])||!((o=l.self.context.disableDates)!=null&&o[0]))return;let d=y(l.self.context.selectedDates[0]),[c,r]=l.self.context.disableDates.map(n=>y(n)).reduce(([n,i],v)=>[d>=v?v:n,d<v&&i===null?v:i],[null,null]);c&&b(l.self,"displayDateMin",H(new Date(c.setDate(c.getDate()+1)))),r&&b(l.self,"displayDateMax",H(new Date(r.setDate(r.getDate()-1)))),l.self.disableDatesPast&&!l.self.disableAllDates&&y(l.self.context.displayDateMin)<y(l.self.context.dateToday)&&b(l.self,"displayDateMin",l.self.context.dateToday)},Xt=(t,e)=>{l.self=t,l.lastDateEl=e,U(),t.disableDatesGaps&&(l.rangeMin=l.rangeMin?l.rangeMin:t.context.displayDateMin,l.rangeMax=l.rangeMax?l.rangeMax:t.context.displayDateMax),t.onCreateDateRangeTooltip&&(l.tooltipEl=t.context.mainElement.querySelector("[data-vc-date-range-tooltip]"));let a=e==null?void 0:e.dataset.vcDate;if(a){let o=t.context.selectedDates.length===1&&t.context.selectedDates[0].includes(a),d=o&&!mt(t)?[a,a]:o&&mt(t)?[]:t.context.selectedDates.length>1?[a]:[...t.context.selectedDates,a];b(t,"selectedDates",d),t.context.selectedDates.length>1&&t.context.selectedDates.sort((c,r)=>+new Date(c)-+new Date(r))}({set:()=>(t.disableDatesGaps&&wa(),A(l.self,l.tooltipEl,e),l.self.context.mainElement.removeEventListener("mousemove",X),l.self.context.mainElement.removeEventListener("mouseleave",$),l.self.context.mainElement.removeEventListener("keydown",B),l.self.context.mainElement.addEventListener("mousemove",J),l.self.context.mainElement.addEventListener("mouseleave",$),l.self.context.mainElement.addEventListener("keydown",B),()=>{l.self.context.mainElement.removeEventListener("mousemove",J),l.self.context.mainElement.removeEventListener("mouseleave",$),l.self.context.mainElement.removeEventListener("keydown",B)}),reset:()=>{let[o,d]=[t.context.selectedDates[0],t.context.selectedDates[t.context.selectedDates.length-1]],c=t.context.selectedDates[0]!==t.context.selectedDates[t.context.selectedDates.length-1],r=L([`${o}:${d}`]).filter(i=>!t.context.disableDates.includes(i)),n=c?t.enableEdgeDatesOnly?[o,d]:r:[t.context.selectedDates[0],t.context.selectedDates[0]];if(b(t,"selectedDates",n),t.disableDatesGaps&&(b(t,"displayDateMin",l.rangeMin),b(t,"displayDateMax",l.rangeMax)),l.self.context.mainElement.removeEventListener("mousemove",J),l.self.context.mainElement.removeEventListener("mouseleave",$),l.self.context.mainElement.removeEventListener("keydown",B),t.onCreateDateRangeTooltip)return t.context.selectedDates[0]||(l.self.context.mainElement.removeEventListener("mousemove",X),l.self.context.mainElement.removeEventListener("mouseleave",$),A(l.self,l.tooltipEl,null)),t.context.selectedDates[0]&&(l.self.context.mainElement.addEventListener("mousemove",X),l.self.context.mainElement.addEventListener("mouseleave",$),A(l.self,l.tooltipEl,e)),()=>{l.self.context.mainElement.removeEventListener("mousemove",X),l.self.context.mainElement.removeEventListener("mouseleave",$)}}})[t.context.selectedDates.length===1?"set":"reset"]()},it=t=>{t.context.mainElement.querySelectorAll("[data-vc-date]").forEach(e=>{let a=e.querySelector("[data-vc-date-btn]"),o=e.dataset.vcDate,d=y(o).getDay();Bt(t,t.context.selectedYear,e,a,d,o,"current")})},fa=(t,e)=>{var a;let o=e.target,d=o.closest("[data-vc-date-btn]");if(!t.selectionDatesMode||!["single","multiple","multiple-ranged"].includes(t.selectionDatesMode)||!d)return;let c=d.closest("[data-vc-date]");({single:()=>Ot(t,c,!1),multiple:()=>Ot(t,c,!0),"multiple-ranged":()=>Xt(t,c)})[t.selectionDatesMode](),(a=t.context.selectedDates)==null||a.sort((i,v)=>+new Date(i)-+new Date(v)),t.onClickDate&&t.onClickDate(t,e),t.inputMode&&t.context.inputElement&&t.context.mainElement&&t.onChangeToInput&&t.onChangeToInput(t,e);let r=o.closest('[data-vc-date-month="prev"]'),n=o.closest('[data-vc-date-month="next"]');({prev:()=>t.enableMonthChangeOnDayClick?ht(t,"prev"):it(t),next:()=>t.enableMonthChangeOnDayClick?ht(t,"next"):it(t),current:()=>it(t)})[r?"prev":n?"next":"current"]()},_a=["month","year"],Jt=(t,e,a)=>{let{currentValue:o,columnID:d}=kt(t,e);return t.context.currentType==="month"&&d>=0?a-d:t.context.currentType==="year"&&t.context.selectedYear!==o?a-1:a},xa=(t,e)=>{let a=Jt(t,"year",Number(e.dataset.vcYearsYear)),o=y(t.context.dateMin),d=y(t.context.dateMax),c=t.context.displayMonthsCount-1,{columnID:r}=kt(t,"year"),n=t.context.selectedMonth<o.getMonth()&&a<=o.getFullYear(),i=t.context.selectedMonth>d.getMonth()-c+r&&a>=d.getFullYear(),v=a<o.getFullYear(),s=a>d.getFullYear(),u=n||v?o.getFullYear():i||s?d.getFullYear():a,w=n||v?o.getMonth():i||s?d.getMonth()-c+r:t.context.selectedMonth;b(t,"selectedYear",u),b(t,"selectedMonth",w)},ka=(t,e)=>{let a=e.closest('[data-vc-column="month"]').querySelector('[data-vc="year"]'),o=Jt(t,"month",Number(e.dataset.vcMonthsMonth)),d=Number(a.dataset.vcYear),c=y(t.context.dateMin),r=y(t.context.dateMax),n=o<c.getMonth()&&d<=c.getFullYear(),i=o>r.getMonth()&&d>=r.getFullYear();b(t,"selectedYear",d),b(t,"selectedMonth",n?c.getMonth():i?r.getMonth():o)},Ma=(t,e,a,o)=>{var d;({year:()=>{if(t.type==="multiple")return xa(t,o);b(t,"selectedYear",Number(o.dataset.vcYearsYear))},month:()=>{if(t.type==="multiple")return ka(t,o);b(t,"selectedMonth",Number(o.dataset.vcMonthsMonth))}})[a](),{year:()=>{var c;return(c=t.onClickYear)==null?void 0:c.call(t,t,e)},month:()=>{var c;return(c=t.onClickMonth)==null?void 0:c.call(t,t,e)}}[a](),t.context.currentType!==t.type?(b(t,"currentType",t.type),ot(t),(d=t.context.mainElement.querySelector(`[data-vc="${a}"]`))==null||d.focus()):xt(t,o,a,!0,!0)},Da=(t,e,a)=>{var o;let d=e.target,c=d.closest(`[data-vc="${a}"]`),r={year:()=>Mt(t,d),month:()=>Ut(t,d)};if(c&&t.onClickTitle&&t.onClickTitle(t,e),c&&t.context.currentType!==a)return r[a]();let n=d.closest(`[data-vc-${a}s-${a}]`);if(n)return Ma(t,e,a,n);let i=d.closest('[data-vc="grid"]'),v=d.closest('[data-vc="column"]');(t.context.currentType===a&&c||t.type==="multiple"&&t.context.currentType===a&&i&&!v)&&(b(t,"currentType",t.type),ot(t),(o=t.context.mainElement.querySelector(`[data-vc="${a}"]`))==null||o.focus())},Ea=(t,e)=>{let a={month:t.selectionMonthsMode,year:t.selectionYearsMode};_a.forEach(o=>{a[o]&&e.target&&Da(t,e,o)})},Ta=(t,e)=>{if(!t.enableWeekNumbers||!t.onClickWeekNumber)return;let a=e.target.closest("[data-vc-week-number]"),o=t.context.mainElement.querySelectorAll("[data-vc-date-week-number]");if(!a||!o[0])return;let d=Number(a.innerText),c=Number(a.dataset.vcWeekYear),r=Array.from(o).filter(n=>Number(n.dataset.vcDateWeekNumber)===d);t.onClickWeekNumber(t,d,c,r,e)},Sa=(t,e)=>{if(!t.onClickWeekDay)return;let a=e.target.closest("[data-vc-week-day]"),o=e.target.closest('[data-vc="column"]'),d=o?o.querySelectorAll("[data-vc-date-week-day]"):t.context.mainElement.querySelectorAll("[data-vc-date-week-day]");if(!a||!d[0])return;let c=Number(a.dataset.vcWeekDay),r=Array.from(d).filter(n=>Number(n.dataset.vcDateWeekDay)===c);t.onClickWeekDay(t,c,r,e)},te=t=>{let e=a=>{ua(t,a),Sa(t,a),Ta(t,a),fa(t,a),Ea(t,a)};return t.context.mainElement.addEventListener("click",e),()=>t.context.mainElement.removeEventListener("click",e)},Ca=t=>{if(t.type==="multiple"&&(t.displayMonthsCount<=1||t.displayMonthsCount>12))throw new Error(Y.incorrectMonthsCount);if(t.type!=="multiple"&&t.displayMonthsCount>1)throw new Error(Y.incorrectMonthsCount);b(t,"displayMonthsCount",t.displayMonthsCount?t.displayMonthsCount:t.type==="multiple"?2:1)},Aa=()=>{let t=new Date;return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().substring(0,10)},z=(t,e)=>t==="today"?Aa():t instanceof Date||typeof t=="number"||typeof t=="string"?L([t])[0]:e,La=t=>{var e,a,o;let d=z(t.dateMin,t.dateMin),c=z(t.dateMax,t.dateMax),r=z(t.displayDateMin,d),n=z(t.displayDateMax,c);b(t,"dateToday",z(t.dateToday,t.dateToday)),b(t,"displayDateMin",r?y(d)>=y(r)?d:r:d),b(t,"displayDateMax",n?y(c)<=y(n)?c:n:c);let i=t.disableDatesPast&&!t.disableAllDates&&y(r)<y(t.context.dateToday);b(t,"displayDateMin",i||t.disableAllDates?t.context.dateToday:r),b(t,"displayDateMax",t.disableAllDates?t.context.dateToday:n),b(t,"disableDates",t.disableDates[0]&&!t.disableAllDates?L(t.disableDates):t.disableAllDates?[t.context.displayDateMin]:[]),t.context.disableDates.length>1&&t.context.disableDates.sort((v,s)=>+new Date(v)-+new Date(s)),b(t,"enableDates",t.enableDates[0]?L(t.enableDates):[]),(e=t.context.enableDates)!=null&&e[0]&&((a=t.context.disableDates)!=null&&a[0])&&b(t,"disableDates",t.context.disableDates.filter(v=>!t.context.enableDates.includes(v))),t.context.enableDates.length>1&&t.context.enableDates.sort((v,s)=>+new Date(v)-+new Date(s)),(o=t.context.enableDates)!=null&&o[0]&&t.disableAllDates&&(b(t,"displayDateMin",t.context.enableDates[0]),b(t,"displayDateMax",t.context.enableDates[t.context.enableDates.length-1])),b(t,"dateMin",t.displayDisabledDates?d:t.context.displayDateMin),b(t,"dateMax",t.displayDisabledDates?c:t.context.displayDateMax)},Na=t=>{var e;b(t,"selectedDates",(e=t.selectedDates)!=null&&e[0]?L(t.selectedDates):[])},Ia=t=>{let e=d=>{let c=new Date(d);bt(t,c.getMonth(),c.getFullYear())};if(t.displayDateMin&&t.displayDateMin!=="today"&&(a=t.displayDateMin,o=new Date,new Date(a).getTime()>o.getTime())){let d=t.selectedDates.length&&t.selectedDates[0]?L(t.selectedDates)[0]:t.displayDateMin;return e(y(z(d,t.displayDateMin))),!0}var a,o;if(t.displayDateMax&&t.displayDateMax!=="today"&&((d,c)=>new Date(d).getTime()<c.getTime())(t.displayDateMax,new Date)){let d=t.selectedDates.length&&t.selectedDates[0]?L(t.selectedDates)[0]:t.displayDateMax;return e(y(z(d,t.displayDateMax))),!0}return!1},bt=(t,e,a)=>{b(t,"selectedMonth",e),b(t,"selectedYear",a),b(t,"displayYear",a)},Ya=t=>{var e;if(t.enableJumpToSelectedDate&&((e=t.selectedDates)!=null&&e[0])&&t.selectedMonth===void 0&&t.selectedYear===void 0){let d=y(L(t.selectedDates)[0]);return void bt(t,d.getMonth(),d.getFullYear())}if(Ia(t))return;let a=t.selectedMonth!==void 0&&Number(t.selectedMonth)>=0&&Number(t.selectedMonth)<12,o=t.selectedYear!==void 0&&Number(t.selectedYear)>=0&&Number(t.selectedYear)<=9999;bt(t,a?Number(t.selectedMonth):y(t.context.dateToday).getMonth(),o?Number(t.selectedYear):y(t.context.dateToday).getFullYear())},$a=t=>{var e,a,o;if(!t.selectionTimeMode)return;if(![12,24].includes(t.selectionTimeMode))throw new Error(Y.incorrectTime);let d=t.selectionTimeMode===12,c=d?/^(0[1-9]|1[0-2]):([0-5][0-9]) ?(AM|PM)?$/i:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])$/,[r,n,i]=(o=(a=(e=t.selectedTime)==null?void 0:e.match(c))==null?void 0:a.slice(1))!=null?o:[];r?d&&!i&&(i="AM"):(r=d?K(String(t.timeMinHour)):String(t.timeMinHour),n=String(t.timeMinMinute),i=d?Number(K(String(t.timeMinHour)))>=12?"PM":"AM":null),b(t,"selectedHours",r.padStart(2,"0")),b(t,"selectedMinutes",n.padStart(2,"0")),b(t,"selectedKeeping",i),b(t,"selectedTime",`${t.context.selectedHours}:${t.context.selectedMinutes}${i?` ${i}`:""}`)},ee=t=>{b(t,"currentType",t.type),Ca(t),La(t),Ya(t),Na(t),$a(t)},ae=(t,{year:e,month:a,dates:o,time:d,locale:c},r=!0)=>{var n;let i={year:t.selectedYear,month:t.selectedMonth,dates:t.selectedDates,time:t.selectedTime};t.selectedYear=e?i.year:t.context.selectedYear,t.selectedMonth=a?i.month:t.context.selectedMonth,t.selectedTime=d?i.time:t.context.selectedTime,t.selectedDates=o==="only-first"&&((n=t.context.selectedDates)!=null&&n[0])?[t.context.selectedDates[0]]:o===!0?i.dates:t.context.selectedDates,c&&b(t,"locale",{months:{short:[],long:[]},weekdays:{short:[],long:[]}}),ee(t),r&&ot(t),t.selectedYear=i.year,t.selectedMonth=i.month,t.selectedDates=i.dates,t.selectedTime=i.time,t.selectionDatesMode==="multiple-ranged"&&o&&Xt(t,null)},za=t=>{let e=document.createElement("div");return e.className=t.styles.calendar,e.dataset.vc="calendar",e.dataset.vcInput="",e.dataset.vcCalendarHidden="",b(t,"inputModeInit",!0),b(t,"isShowInInputMode",!1),b(t,"mainElement",e),document.body.appendChild(t.context.mainElement),ae(t,{year:!0,month:!0,dates:!0,time:!0,locale:!0}),setTimeout(()=>Et(t)),t.onInit&&t.onInit(t),Gt(t),te(t)},Ha=t=>Qt(t,t.openOnFocus),Fa=t=>{b(t,"inputElement",t.context.mainElement);let e=()=>{t.context.inputModeInit?setTimeout(()=>Et(t)):za(t)};t.context.inputElement.addEventListener("click",e);let a=typeof t.openOnFocus=="function"||t.openOnFocus===!0,o=()=>{ye(t)?fe(t):Ha(t)&&e()};a&&t.context.inputElement.addEventListener("focus",o);let d=c=>{let r=c.key==="Tab"&&!c.shiftKey,n=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(c.key);(r||n)&&(i=>{var v;if(!t.context.isShowInInputMode||document.activeElement!==t.context.inputElement)return!1;let s=w=>w.tabIndex>=0&&!w.hasAttribute("disabled")&&w.getAttribute("aria-disabled")!=="true",u=(v=document.createTreeWalker(t.context.mainElement,NodeFilter.SHOW_ELEMENT,{acceptNode:w=>s(w)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}).nextNode())!=null?v:s(t.context.mainElement)?t.context.mainElement:null;!u||u.tabIndex<0||(i.preventDefault(),u.focus())})(c)};return t.context.inputElement.addEventListener("keydown",d),()=>{t.context.inputElement.removeEventListener("click",e),a&&t.context.inputElement.removeEventListener("focus",o),t.context.inputElement.removeEventListener("keydown",d)}},ja=t=>(b(t,"originalElement",t.context.mainElement.cloneNode(!0)),b(t,"isInit",!0),t.inputMode?Fa(t):(ee(t),ot(t),t.onInit&&t.onInit(t),Gt(t),te(t))),de=(t,e)=>{if(!t.context.isInit)throw new Error(Y.notInit);ae(t,W(W({},{year:!0,month:!0,dates:!0,time:!0,locale:!0}),e),!(t.inputMode&&!t.context.inputModeInit)),t.onUpdate&&t.onUpdate(t)},Dt=(t,e)=>{let a=Object.keys(e);for(let o=0;o<a.length;o++){let d=a[o];typeof t[d]!="object"||typeof e[d]!="object"||e[d]instanceof Date||Array.isArray(e[d])?e[d]!==void 0&&(t[d]=e[d]):Dt(t[d],e[d])}},Pa=(t,e,a)=>{Dt(t,e),t.context.isInit&&de(t,a)};function Wa(t,e){let a="left";if(!e||!t)return a;let{canShow:o,parentPositions:d}=Rt(t,e),c=o.left&&o.right;return(c&&o.bottom?"center":c&&o.top?["top","center"]:Array.isArray(d)?[d[0]==="bottom"?"top":"bottom",...d.slice(1)]:d)||a}var qt=(t,e,a)=>{if(!t)return;let o=a==="auto"?Wa(t,e):a,d={top:-e.offsetHeight,bottom:t.offsetHeight,left:0,center:t.offsetWidth/2-e.offsetWidth/2,right:t.offsetWidth-e.offsetWidth},c=Array.isArray(o)?o[0]:"bottom",r=Array.isArray(o)?o[1]:o;e.dataset.vcPosition=c;let{top:n,left:i}=yt(t),v=n+d[c],s=i+d[r],{vw:u}=wt();if(s+e.clientWidth>u){let w=window.innerWidth-document.body.clientWidth;s=u-e.clientWidth-w}else s<0&&(s=0);Object.assign(e.style,{left:`${s}px`,top:`${v}px`})},Et=t=>{if(t.context.isShowInInputMode)return;if(!t.context.currentType)return void t.context.mainElement.click();b(t,"cleanupHandlers",[]),b(t,"isShowInInputMode",!0),t.inputMode&&xe(t.context.mainElement),qt(t.context.inputElement,t.context.mainElement,t.positionToInput),t.context.mainElement.removeAttribute("data-vc-calendar-hidden");let e=()=>{qt(t.context.inputElement,t.context.mainElement,t.positionToInput)};window.addEventListener("resize",e),t.context.cleanupHandlers.push(()=>window.removeEventListener("resize",e));let a=d=>{d.key==="Escape"&&vt(t)};document.addEventListener("keydown",a),t.context.cleanupHandlers.push(()=>document.removeEventListener("keydown",a));let o=d=>{d.target===t.context.inputElement||t.context.mainElement.contains(d.target)||vt(t)};document.addEventListener("click",o,{capture:!0}),t.context.cleanupHandlers.push(()=>document.removeEventListener("click",o,{capture:!0})),t.onShow&&t.onShow(t)},Oa={application:"Calendar",navigation:"Calendar Navigation",arrowNext:{month:"Next month",year:"Next list of years"},arrowPrev:{month:"Previous month",year:"Previous list of years"},month:"Select month, current selected month:",months:"List of months",year:"Select year, current selected year:",years:"List of years",week:"Days of the week",weekNumber:"Numbers of weeks in a year",dates:"Dates in the current month",selectingTime:"Selecting a time ",inputHour:"Hours",inputMinute:"Minutes",rangeHour:"Slider for selecting hours",rangeMinute:"Slider for selecting minutes",btnKeeping:"Switch AM/PM, current position:"},qa={calendar:"vc",controls:"vc-controls",grid:"vc-grid",column:"vc-column",header:"vc-header",headerContent:"vc-header__content",month:"vc-month",year:"vc-year",arrowPrev:"vc-arrow vc-arrow_prev",arrowNext:"vc-arrow vc-arrow_next",wrapper:"vc-wrapper",content:"vc-content",months:"vc-months",monthsMonth:"vc-months__month",years:"vc-years",yearsYear:"vc-years__year",week:"vc-week",weekDay:"vc-week__day",weekNumbers:"vc-week-numbers",weekNumbersTitle:"vc-week-numbers__title",weekNumbersContent:"vc-week-numbers__content",weekNumber:"vc-week-number",dates:"vc-dates",datesRow:"vc-dates__row",date:"vc-date",dateBtn:"vc-date__btn",datePopup:"vc-date__popup",dateRangeTooltip:"vc-date-range-tooltip",time:"vc-time",timeContent:"vc-time__content",timeHour:"vc-time__hour",timeMinute:"vc-time__minute",timeKeeping:"vc-time__keeping",timeRanges:"vc-time__ranges",timeRange:"vc-time__range"},ut=class{constructor(){h(this,"type","default"),h(this,"inputMode",!1),h(this,"openOnFocus",!0),h(this,"positionToInput","left"),h(this,"firstWeekday",1),h(this,"monthsToSwitch",1),h(this,"themeAttrDetect","html[data-theme]"),h(this,"locale","en"),h(this,"dateToday","today"),h(this,"dateMin","1970-01-01"),h(this,"dateMax","2470-12-31"),h(this,"displayDateMin"),h(this,"displayDateMax"),h(this,"displayDatesOutside",!0),h(this,"displayDisabledDates",!1),h(this,"displayMonthsCount"),h(this,"disableDates",[]),h(this,"disableAllDates",!1),h(this,"disableDatesPast",!1),h(this,"disableDatesGaps",!1),h(this,"disableWeekdays",[]),h(this,"disableToday",!1),h(this,"enableDates",[]),h(this,"enableEdgeDatesOnly",!0),h(this,"enableDateToggle",!0),h(this,"enableWeekNumbers",!1),h(this,"enableMonthChangeOnDayClick",!0),h(this,"enableJumpToSelectedDate",!1),h(this,"selectionDatesMode","single"),h(this,"selectionMonthsMode",!0),h(this,"selectionYearsMode",!0),h(this,"selectionTimeMode",!1),h(this,"selectedDates",[]),h(this,"selectedMonth"),h(this,"selectedYear"),h(this,"selectedHolidays",[]),h(this,"selectedWeekends",[0,6]),h(this,"selectedTime"),h(this,"selectedTheme","system"),h(this,"timeMinHour",0),h(this,"timeMaxHour",23),h(this,"timeMinMinute",0),h(this,"timeMaxMinute",59),h(this,"timeControls","all"),h(this,"timeStepHour",1),h(this,"timeStepMinute",1),h(this,"sanitizerHTML",e=>e),h(this,"onClickDate"),h(this,"onClickWeekDay"),h(this,"onClickWeekNumber"),h(this,"onClickTitle"),h(this,"onClickMonth"),h(this,"onClickYear"),h(this,"onClickArrow"),h(this,"onChangeTime"),h(this,"onChangeToInput"),h(this,"onCreateDateRangeTooltip"),h(this,"onCreateDateEls"),h(this,"onCreateMonthEls"),h(this,"onCreateYearEls"),h(this,"onInit"),h(this,"onUpdate"),h(this,"onDestroy"),h(this,"onShow"),h(this,"onHide"),h(this,"popups",{}),h(this,"labels",W({},Oa)),h(this,"layouts",{default:"",multiple:"",month:"",year:""}),h(this,"styles",W({},qa))}},oe=class gt extends ut{constructor(e,a){var o;super(),h(this,"init",()=>ja(this)),h(this,"update",d=>de(this,d)),h(this,"destroy",()=>pe(this)),h(this,"show",()=>Et(this)),h(this,"hide",()=>vt(this)),h(this,"set",(d,c)=>Pa(this,d,c)),h(this,"context"),this.context=ge(W({},this.context),{locale:{months:{short:[],long:[]},weekdays:{short:[],long:[]}}}),b(this,"mainElement",typeof e=="string"?(o=gt.memoizedElements.get(e))!=null?o:this.queryAndMemoize(e):e),a&&Dt(this,a)}queryAndMemoize(e){let a=document.querySelector(e);if(!a)throw new Error(Y.notFoundSelector(e));return gt.memoizedElements.set(e,a),a}};h(oe,"memoizedElements",new Map);var ce=oe;document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("booking-form");if(!t)return;let e=document.querySelectorAll('input[name="location"]'),a=document.getElementById("booking_date"),o=document.getElementById("ticket_type"),d=document.getElementById("time_slot"),c=document.getElementById("num_male"),r=document.getElementById("num_female"),n=t.querySelector(".btn-submit"),i=document.getElementById("booking-response");t.reset(),window.addEventListener("pageshow",function(m){let g=performance.getEntriesByType("navigation");(m.persisted||g.length>0&&g[0].type==="back_forward")&&(t.reset(),e.forEach(_=>_.checked=!1),u&&(u.destroy(),u=null,w=null),M(),a.disabled=!0,S("ticket"),nt())});function v(){let m=document.querySelector('input[name="location"]:checked');return m?m.value:""}let s=bookingFormData.christmas_dates||[],u=null,w=null,f=null;function M(){return f&&f.parentNode&&f.parentNode.removeChild(f),f=document.createElement("div"),f.className="vanilla-calendar-wrapper",a.parentNode.insertBefore(f,a.nextSibling),f}M(),St(c),St(r),D();function D(){[c,r].forEach(m=>{let g=m.parentElement,p=g.querySelector(".btn-up"),_=g.querySelector(".btn-down");m.disabled?(p.disabled=!0,_.disabled=!0):(p.disabled=!1,_.disabled=!1)})}function T(m){return{"terme-genova":"genova","monterosa-spa":"monterosa","terme-saint-vincent":"saint-vincent"}[m]||m}function q(m){return s.includes(m)}async function N(m){try{let p=`/wp-content/plugins/plugin-custom-skianet/assets/data/availability-${T(m)}.json`,_=await fetch(p);return _.ok?await _.json():(console.error(`File non trovato: ${p}`),E("error","Impossibile caricare il calendario per questa location."),null)}catch(g){return console.error("Errore nel recupero del JSON availability:",g),E("error","Errore nel caricamento del calendario."),null}}function F(m){return!m||!m.availability?[]:Object.entries(m.availability).filter(([,p])=>!p).map(([p])=>p)}async function Tt(m){if(u)return;let g=new Date,p=new Date;p.setDate(p.getDate()+60);let _=new Date(g.getFullYear(),g.getMonth(),1),x=new Date(g.getFullYear(),g.getMonth()+2,0);w=await N(m);let k=F(w),C={locale:"it",selectedTheme:"light",selectionDatesMode:"single",dateMin:_.toISOString().split("T")[0],dateMax:x.toISOString().split("T")[0],disableDates:k,disableDatesPast:!0,selectedDates:a.value?[a.value]:[],onShow(){f.style.display="block"},onClickDate(Ct,Ra){let R=Ct.context.selectedDates[0];if(R&&!k.includes(R)){let[Ba,Za,Ka]=R.split("-");a.value=R;let ve=new Event("change",{bubbles:!0});a.dispatchEvent(ve),console.log("Data selezionata:",R),f.style.display="none"}else E("error","Data non disponibile. Seleziona un'altra data."),Ct.update()}};u=new ce(f,C),u.init()}a.addEventListener("click",async function(m){if(!this.disabled){if(m.preventDefault(),!u){let g=v();g&&await Tt(g)}u&&u.show()}});let j=null;e.forEach(m=>{m.addEventListener("change",async function(){a.value="",o.value="",o.selectedIndex=0,d.value="",d.innerHTML='<option value="">-- Seleziona una fascia oraria --</option>',c.value="0",r.value="0",u&&(u.destroy(),u=null,w=null),nt(),j=null,this.value?(M(),await Tt(this.value),a.disabled=!1,Q(a.closest(".form-group"))):(a.disabled=!0,S("ticket"))})}),a.addEventListener("change",function(){o.value="",o.selectedIndex=0,d.value="",d.innerHTML='<option value="">-- Seleziona una fascia oraria --</option>';let m=v();this.value&&m?(ne(this.value),ie(m,this.value)):S("ticket")}),o.addEventListener("change",function(){d.disabled=!this.value,d.value="",this.value?Q(d.closest(".form-group")):S("time")}),d.addEventListener("change",function(){let m=!!this.value;if(c.disabled=!m,r.disabled=!m,D(),!m)c.value="0",r.value="0",n.disabled=!0;else{let g=this.options[this.selectedIndex],p=g.dataset.categorie||"",_=g.dataset.disponibilita||"0",x=document.getElementById("selected_categorie");x||(x=document.createElement("input"),x.type="hidden",x.id="selected_categorie",x.name="categorie",t.appendChild(x)),x.value=p;let k=document.getElementById("selected_disponibilita");k||(k=document.createElement("input"),k.type="hidden",k.id="selected_disponibilita",k.name="disponibilita",t.appendChild(k)),k.value=_,Q(c.closest(".form-group")),ct()}}),c.addEventListener("input",ct),r.addEventListener("input",ct);function ne(m){if(!o||!m)return;let g=q(m),p=o.querySelector('option[value="giornaliero"]');p&&(g?(p.disabled=!0,p.textContent="Giornaliero (non disponibile nel periodo natalizio)",o.value==="giornaliero"&&(o.value="4h")):(p.disabled=!1,p.textContent="Giornaliero"))}function re(m){let g=o.querySelector('option[value="giornaliero"]');if(!g)return;m.some(_=>{let x=(_.categorie||"").toLowerCase().split(",");return x.includes("p3")||x.includes("p4")})||(g.disabled=!0,g.textContent="Giornaliero (non disponibile per questa data)",o.value==="giornaliero"&&(o.value="4h"))}function S(m){j=null;let g={date:[o,d,c,r],ticket:[d,c,r],time:[c,r]};g[m]&&g[m].forEach(p=>{p.disabled=!0,p.value=p.type==="tel"?"0":""}),n.disabled=!0,D()}function ct(){let m=(parseInt(c.value)||0)+(parseInt(r.value)||0);n.disabled=!(m>0&&m<=20&&d.value)}function E(m,g){i.className=`booking-response ${m}`,i.textContent=g,i.style.display="block"}function nt(){i.style.display="none"}function Q(m){window.innerWidth>768||!m||setTimeout(()=>{m.scrollIntoView({behavior:"smooth",block:"start"})},300)}function St(m){let g=document.createElement("div");g.className="number-input-wrapper",m.parentNode.insertBefore(g,m),g.appendChild(m);let p=document.createElement("button");p.type="button",p.className="btn-number btn-up",p.textContent="+";let _=document.createElement("button");_.type="button",_.className="btn-number btn-down",_.textContent="\u2212",g.appendChild(_),g.appendChild(p),p.addEventListener("click",function(){let x=parseInt(m.value)||0;x<m.max&&(m.value=x+1,m.dispatchEvent(new Event("input")))}),_.addEventListener("click",function(){let x=parseInt(m.value)||0;x>m.min&&(m.value=x-1,m.dispatchEvent(new Event("input")))})}function ie(m,g){E("","Verifica disponibilit\xE0 in corso..."),S("ticket");let p=new FormData;p.append("action","check_availability_api"),p.append("nonce",bookingFormData.nonce),p.append("location",m),p.append("booking_date",g),fetch(bookingFormData.ajaxurl,{method:"POST",body:p}).then(_=>_.json()).then(_=>{if(_.success){if(j=_.data,j.available_slots.filter(k=>k.disponibilita>0).length===0){E("error","Nessuna fascia oraria disponibile per questa data."),S("ticket");return}E("success",_.data.message||"Disponibilit\xE0 verificata!"),le(j.available_slots),re(j.available_slots),o.disabled=!1,Q(o.closest(".form-group"))}else E("error",_.data.message||"Nessuna disponibilit\xE0 per questa data."),S("ticket")}).catch(_=>{console.error("Errore API:",_),E("error","Errore di connessione durante la verifica disponibilit\xE0."),S("ticket")})}function le(m){if(d.innerHTML='<option value="">-- Seleziona una fascia oraria --</option>',!m||m.length===0){E("error","Nessuna fascia oraria disponibile per questa data.");return}m.forEach(g=>{if(g.disponibilita>0){let p=document.createElement("option");p.value=g.id,p.textContent=`${g.time} - ${g.disponibilita} posti disponibili`,p.dataset.time=g.time,p.dataset.categorie=g.categorie||"",p.dataset.disponibilita=g.disponibilita,d.appendChild(p)}})}t.addEventListener("submit",function(m){m.preventDefault();let g=parseInt(c.value)||0,p=parseInt(r.value)||0;if(g+p===0){E("error","Seleziona almeno un ingresso.");return}n.disabled=!0,n.textContent="Invio in corso...",nt();let x=new FormData(t),k=d.options[d.selectedIndex];k&&k.dataset.time&&x.append("time_slot_label",k.dataset.time),fetch(bookingFormData.ajaxurl,{method:"POST",body:x}).then(C=>C.json()).then(C=>{C.success?(E("success","Dati prenotazione completati, verrai indirizzato per completare l'acquisto."),t.reset(),S("date"),a.disabled=!0,C.data.redirect_url?setTimeout(()=>{window.location.href=C.data.redirect_url},500):(t.reset(),S("date"),a.disabled=!0)):(E("error",C.data.message||"Errore durante la prenotazione."),n.disabled=!1)}).catch(C=>{console.error("Errore submit:",C),E("error","Errore di connessione."),n.disabled=!1}).finally(()=>{n.disabled&&setTimeout(()=>{n.disabled=!1},200)})})});})();
/*! Bundled license information:

vanilla-calendar-pro/index.mjs:
  (*! name: vanilla-calendar-pro v3.1.0 | url: https://github.com/uvarov-frontend/vanilla-calendar-pro *)
*/
//# sourceMappingURL=booking-form.min.js.map
